"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.applyJsonata = void 0;
exports.generateMapping = generateMapping;
const core_1 = require("@aigne/core");
const mapper_js_1 = __importDefault(require("./agents/mapper.js"));
const reviewer_js_1 = __importDefault(require("./agents/reviewer.js"));
async function generateMapping({ input, model, }) {
    if (!model)
        throw new Error("model is required to run data mapper");
    const aigne = new core_1.AIGNE({ model, agents: [mapper_js_1.default, reviewer_js_1.default] });
    aigne.publish(core_1.UserInputTopic, input);
    const { message } = await aigne.subscribe(core_1.UserOutputTopic);
    return {
        jsonata: message.jsonata || "",
        confidence: message.confidence || 0,
        confidenceReasoning: message.confidenceReasoning || "",
    };
}
var tools_js_1 = require("./tools.js");
Object.defineProperty(exports, "applyJsonata", { enumerable: true, get: function () { return tools_js_1.applyJsonata; } });
