"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getAIGNEHubMountPoint = getAIGNEHubMountPoint;
const ufo_1 = require("ufo");
async function getAIGNEHubMountPoint(url, component) {
    const { origin } = new URL(url);
    const BLOCKLET_JSON_PATH = "__blocklet__.js?type=json";
    const blockletInfo = await fetch((0, ufo_1.joinURL)(origin, BLOCKLET_JSON_PATH));
    const blocklet = await blockletInfo.json();
    const comp = (blocklet?.componentMountPoints || []).find((m) => m.did === component);
    if (!comp)
        throw new Error(`Component ${component} not found in blocklet ${url}`);
    return (0, ufo_1.joinURL)(origin, comp.mountPoint);
}
