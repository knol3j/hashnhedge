{{- /* 
    JSON-LD Structured Data - Teaching search engines to read 
    like they're parsing the Dead Sea Scrolls of capitalism
*/ -}}

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "Organization",
      "@id": "{{ .Site.BaseURL }}#organization",
      "name": "{{ .Site.Title }}",
      "url": "{{ .Site.BaseURL }}",
      "logo": {
        "@type": "ImageObject",
        "url": "{{ .Site.BaseURL }}/images/logo.png"
      },
      "description": "{{ .Site.Params.description }}",
      "sameAs": [
        {{- range $i, $e := .Site.Params.social -}}
        {{- if $i }},{{ end }}"{{ $e }}"
        {{- end -}}
      ]
    },
    {
      "@type": "WebSite",
      "@id": "{{ .Site.BaseURL }}#website",
      "url": "{{ .Site.BaseURL }}",
      "name": "{{ .Site.Title }}",
      "description": "{{ .Site.Params.description }}",
      "publisher": {
        "@id": "{{ .Site.BaseURL }}#organization"
      },
      "potentialAction": {
        "@type": "SearchAction",
        "target": "{{ .Site.BaseURL }}/search?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    },
    {{- if not .IsHome -}}
    {
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "{{ .Site.BaseURL }}"
        }
        {{- range $i, $e := .Ancestors.Reverse -}}
        ,{
          "@type": "ListItem",
          "position": {{ add $i 2 }},
          "name": "{{ $e.Title }}",
          "item": "{{ $e.Permalink }}"
        }
        {{- end -}}
        ,{
          "@type": "ListItem",
          "position": {{ add (len .Ancestors) 2 }},
          "name": "{{ .Title }}",
          "item": "{{ .Permalink }}"
        }
      ]
    },
    {
      "@type": "NewsArticle",
      "@id": "{{ .Permalink }}#article",
      "headline": "{{ substr .Title 0 110 }}",
      "description": "{{ substr (.Description | default .Summary) 0 160 }}",
      "image": "{{ .Site.BaseURL }}{{ .Params.image | default "/images/og-default.jpg" }}",
      "datePublished": "{{ .PublishDate.Format "2006-01-02T15:04:05Z07:00" }}",
      "dateModified": "{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}",
      "author": {
        "@type": "Person",
        "name": "{{ .Params.author | default .Site.Author.name }}",
        "url": "{{ .Site.BaseURL }}/about/"
      },
      "publisher": {
        "@id": "{{ .Site.BaseURL }}#organization"
      },
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "{{ .Permalink }}"
      },
      "keywords": "{{ delimit .Params.tags ", " }}",
      "articleSection": "{{ index .Params.categories 0 | default "General" }}",
      "wordCount": {{ .WordCount }},
      "commentCount": 0
    }
    {{- end -}}
  ]
}
</script>